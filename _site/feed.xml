<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>兰亭富春</title>
    <description>中华珍宝馆,中国历代高清书法图片欣赏和下载,高清绘画图片欣赏和下载，本站是中华珍宝馆的开发者Blog</description>
    <link>http://sanli.github.io/</link>
    <atom:link href="http://sanli.github.io/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Wed, 06 Jul 2016 20:40:21 +0800</pubDate>
    <lastBuildDate>Wed, 06 Jul 2016 20:40:21 +0800</lastBuildDate>
    <generator>Jekyll v3.1.6</generator>
    
      <item>
        <title>中华珍宝馆所有馆藏列表</title>
        <description>&lt;style&gt;
path {
  stroke: #fff;
  /* stroke-width: 1.5; */
  cursor: pointer;
}

text {
  font: 11px sans-serif;
  cursor: pointer;
}

&lt;/style&gt;

&lt;script src=&quot;//d3js.org/d3.v3.min.js&quot;&gt;&lt;/script&gt;

&lt;div id=&quot;cagd3&quot; class=&quot;col-md-12&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;info&quot; class=&quot;col-md-12&quot;&gt;&lt;/div&gt;
&lt;script&gt;

var width = 760,
    height = 700,
    radius = (Math.min(width, height) / 2) - 10;

var formatNumber = d3.format(&quot;,d&quot;);

var x = d3.scale.linear()
    .range([0, 2 * Math.PI]);

// var y = d3.scale.sqrt()
//     .range([0, radius]);
var y = d3.scale.pow().exponent(1.3).domain([0, 1]).range([0, radius])

var color = d3.scale.category20c();

var partition = d3.layout.partition()
    .value(function(d) { return d.size; });

var a = function(t) {
    return .299 * t.r + .587 * t.g + .114 * t.b
}

var padding = 5;
var showlabelx = 0.01;

var arc = d3.svg.arc()
    .startAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x))); })
    .endAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx))); })
    .innerRadius(function(d) { return Math.max(0, y(d.y)); })
    .outerRadius(function(d) { return Math.max(0, y(d.y + d.dy)); });

var svg = d3.select(&quot;#cagd3&quot;).append(&quot;svg&quot;)
    .attr(&quot;width&quot;, width)
    .attr(&quot;height&quot;, height)
  	.append(&quot;g&quot;)
    .attr(&quot;transform&quot;, &quot;translate(&quot; + width / 2 + &quot;,&quot; + (height / 2) + &quot;)&quot;);
var info = d3.select(&quot;#info&quot;);
var pathy, texty ;


d3.json(&quot;http://ltfc.net/cagstore/outline_d3.json&quot;, function(error, root) {
  if (error) throw error;

  svg.selectAll(&quot;path&quot;)
      .data(partition.nodes(root))
      .enter().append(&quot;path&quot;)
      .attr(&quot;d&quot;, arc)
      .style(&quot;fill&quot;, function(d) { return color((d.children ? d : d.parent).name); })
      .on(&quot;click&quot;, click)
      .on(&quot;mouseover&quot;, mouseover)
      .append(&quot;title&quot;)
      .text(function(d) { return d.name + &quot;\n&quot; + formatNumber(d.value); });

   var texty = svg.selectAll(&quot;text&quot;)
   	  .data(partition.nodes(root))
      .enter().append(&quot;text&quot;)
      .style(&quot;fill-opacity&quot;, 1).style(&quot;fill&quot;, function(d) {
      	  return colorvalue( d3.rgb( color((d.children ? d : d.parent).name)) ) &lt; 125 ? &quot;#eee&quot; : &quot;#000&quot; ;
      })
      .style(&quot;visibility&quot;, function(e) {
      	return e.dx &lt; showlabelx ? &#39;hidden&#39; : null;
	  })
      .attr(&quot;text-anchor&quot;, function(t) {
          return x(t.x + t.dx / 2) &gt; Math.PI ? &quot;end&quot; : &quot;start&quot;
	  })
	  .attr(&quot;dy&quot;, &quot;.2em&quot;).attr(&quot;transform&quot;, function(t) {
	        var n = (t.name || &quot;&quot;).split(&quot; &quot;).length &gt; 1
	          , e = 180 * x(t.x + t.dx / 2) / Math.PI - 90
	          , r = e + (n ? -.5 : 0);
	        return &quot;rotate(&quot; + r + &quot;)translate(&quot; + (y(t.y) + padding) + &quot;)rotate(&quot; + (e &gt; 90 ? -180 : 0) + &quot;)&quot;
	    })
	  .on(&quot;click&quot;, click)
	  .on(&quot;mouseover&quot;, mouseover);
	texty.append(&quot;tspan&quot;).attr(&quot;x&quot;, 0).text(function(t) {
        return t.depth ? t.name.split(&quot; &quot;)[0] : &quot;&quot;
    }),
    texty.append(&quot;tspan&quot;).attr(&quot;x&quot;, 0).attr(&quot;dy&quot;, &quot;1em&quot;).text(function(t) {
        return t.depth ? t.name.split(&quot; &quot;)[1] || &quot;&quot; : &quot;&quot;
    })
});

function colorvalue(color) {
    return .299 * color.r + .587 * color.g + .114 * color.b
}

// 递归遍历子节点
function isSubnode(n, e) {
    return n === e ?
    	!0 : n.children ?
    		n.children.some(function(n) {
		        return isSubnode(n, e)
		    }) : !1 ;
}

function mouseover(d){
	var label = d.name ;
  var age = d.parent ? d.parent.name : &#39;&#39;;
	var painting = d.paintings
    ? d.paintings.map( paint =&gt;
      `&lt;a href=&#39;http://ltfc.net/outline/${age}/${label}/${paint}&#39;&gt;${paint}&lt;/a&gt;`).join(&#39;&lt;/br&gt;&#39;)
    : &#39;&#39;;
	info.html(`&lt;h1&gt;${label}&lt;/h1&gt;${painting}`);
}

function click(d) {
  svg.transition()
      .duration(750)
      .tween(&quot;scale&quot;, function() {
        var xd = d3.interpolate(x.domain(), [d.x, d.x + d.dx]),
            yd = d3.interpolate(y.domain(), [d.y, 1]),
            yr = d3.interpolate(y.range(), [d.y ? 20 : 0, radius]);
        return function(t) { x.domain(xd(t)); y.domain(yd(t)).range(yr(t)); };
      })
    .selectAll(&quot;path&quot;)
    .attrTween(&quot;d&quot;, function(d) {
    	return function() { return arc(d); };
    });

   svg.selectAll(&quot;text&quot;)
    .style(&quot;visibility&quot;, function(e) {
    	var wheelx = e.dx / d.dx;
       	return isSubnode(d, e)
       		? wheelx &lt; showlabelx ? &#39;hidden&#39; : null
       		: d3.select(this).style(&quot;visibility&quot;);
    })
    .transition()
    .duration(750)
    .attrTween(&quot;text-anchor&quot;, function(t) {
        return function() {
            return x(t.x + t.dx / 2) &gt; Math.PI ? &quot;end&quot; : &quot;start&quot;
        }
    }).attrTween(&quot;transform&quot;, function(t) {
        var n = (t.name || &quot;&quot;).split(&quot; &quot;).length &gt; 1;
        return function() {
            var e = 180 * x(t.x + t.dx / 2) / Math.PI - 90
              , r = e + (n ? -.5 : 0);
            return &quot;rotate(&quot; + r + &quot;)translate(&quot; + (y(t.y) + padding) + &quot;)rotate(&quot; + (e &gt; 90 ? -180 : 0) + &quot;)&quot;
        }
    }).style(&quot;fill-opacity&quot;, function(e) {
        return isSubnode(d, e) ? 1 : 1e-6
    }).each(&quot;end&quot;, function(e) {
        d3.select(this).style(&quot;visibility&quot;, function(e) {
        	var wheelx = e.dx / d.dx;
	        return isSubnode(d, e)
	        	? wheelx &lt; showlabelx ? &#39;hidden&#39; : null
	        	: d3.select(this).style(&quot;visibility&quot;);
	    });
    });

}
d3.select(self.frameElement).style(&quot;height&quot;, height + &quot;px&quot;);

&lt;/script&gt;

</description>
        <pubDate>Wed, 06 Jul 2016 11:30:00 +0800</pubDate>
        <link>http://sanli.github.io/message/2016/07/06/cag-paintings-index.html</link>
        <guid isPermaLink="true">http://sanli.github.io/message/2016/07/06/cag-paintings-index.html</guid>
        
        
        <category>message</category>
        
      </item>
    
      <item>
        <title>如何制作保留墨色的白描图</title>
        <description>&lt;p&gt;本教程说明了如何从高清出上制作出保留墨色变化，并且非常清晰的白描图，效果比较好，值得试试。
先看一下效果图（局部）：
//TODO : 图暂缺&lt;/p&gt;

&lt;p&gt;原图 ( 来自中华珍宝馆 http://ltfc.net/img/5451130487511e3c1adee53b)：
//TODO : 图暂缺
可以看到，生成效果保留了墨色变化，并且线条清晰光洁，适合制作白描图学习。&lt;/p&gt;

&lt;p&gt;下面开始介绍方法，以西岳降临图为例（ 来自中华珍宝馆 http://ltfc.net/img/5451130487511e3c1adee53c），制作一副白描图。使用的软件是Photoshop CS6，用到工具各个版本的Photoshop应该都能支持。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;打开西岳降临图，裁切为合适大小。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;执行去色操作，去掉色彩
//TODO : 图暂缺&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;去色后图片成为灰度图片。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;复制一份图层
//TODO : 图暂缺&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;3.把上面图层的混合模式调整为颜色减淡&lt;/p&gt;

&lt;p&gt;//TODO : 图暂缺&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;对上面的图层进行反相&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;//TODO : 图暂缺&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;对反相后的上面图层应用高斯滤镜
对于大图片，滤镜的半径需要设置的比较大，一般在300～500个像素，这个需要多尝试几次，选择最好的效果，如下图：&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;//TODO : 图暂缺&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;模糊结束后，往往有些地方会有一些黑斑，可以用提亮工具在上面的图层上稍微擦除一下&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;//TODO : 图暂缺&lt;/p&gt;

&lt;p&gt;最终效果如下图，保留了墨色变化，线条依然清晰：&lt;/p&gt;

&lt;p&gt;//TODO : 图暂缺&lt;/p&gt;
</description>
        <pubDate>Tue, 15 Sep 2015 11:30:00 +0800</pubDate>
        <link>http://sanli.github.io/message/2015/09/15/how-to-build-outline-pic-with-ps.html</link>
        <guid isPermaLink="true">http://sanli.github.io/message/2015/09/15/how-to-build-outline-pic-with-ps.html</guid>
        
        
        <category>message</category>
        
      </item>
    
      <item>
        <title>中华珍宝馆大事记</title>
        <description>&lt;p&gt;//TODO:&lt;/p&gt;
</description>
        <pubDate>Thu, 02 Jul 2015 18:49:36 +0800</pubDate>
        <link>http://sanli.github.io/message/2015/07/02/history-of-ltfc.html</link>
        <guid isPermaLink="true">http://sanli.github.io/message/2015/07/02/history-of-ltfc.html</guid>
        
        
        <category>message</category>
        
      </item>
    
      <item>
        <title>中华珍宝馆日志迁移到GitHub Pages</title>
        <description>&lt;p&gt;一直苦于找不到一个好的博客服务商，最近开始迁移到GitHub Pages，运行一段时间看看效果。稳定性应该有保证，就是不知道国内的访问速度会不会受到影响。&lt;/p&gt;

&lt;p&gt;这个博客将包含一下主要项目：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;中华珍宝馆有关的说明和公告。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;图形处理和图片数字化相关的技术。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;招募和培训支援者。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Thu, 02 Jul 2015 18:49:36 +0800</pubDate>
        <link>http://sanli.github.io/message/2015/07/02/move-to-github-pages.html</link>
        <guid isPermaLink="true">http://sanli.github.io/message/2015/07/02/move-to-github-pages.html</guid>
        
        
        <category>message</category>
        
      </item>
    
      <item>
        <title>关于资源下载</title>
        <description>&lt;p&gt;中华珍宝馆提供馆藏部分图片的下载，提供的一般规则为：&lt;/p&gt;

&lt;p&gt;＃ 图片被选入铭心绝品栏目&lt;/p&gt;

&lt;p&gt;或者&lt;/p&gt;

&lt;p&gt;＃ 每天热评前三的图片&lt;/p&gt;

&lt;p&gt;＃ 有学术或者是出版要求的个人，请到QQ群中索要图片（需提供原因）&lt;/p&gt;

&lt;p&gt;愿大家有一个好的环境，可以尽情的欣赏艺术。&lt;/p&gt;
</description>
        <pubDate>Thu, 02 Jul 2015 18:49:36 +0800</pubDate>
        <link>http://sanli.github.io/message/2015/07/02/about-download.html</link>
        <guid isPermaLink="true">http://sanli.github.io/message/2015/07/02/about-download.html</guid>
        
        
        <category>message</category>
        
      </item>
    
  </channel>
</rss>
